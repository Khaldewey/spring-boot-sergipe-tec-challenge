<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Sacar de Conta Corrente</title>
    <script>
        function showDepositInput(accountId) {
            
            document.getElementById('accountId').value = accountId;
            document.getElementById('account-id-display').textContent = accountId;  
            document.getElementById('deposit-form').style.display = 'block';
        }
    </script>
</head>
<body>
    <h1>Sacar de Conta Corrente</h1>

   
    <table>
        <thead>
            <tr>
                <th>ID da Conta</th>
                <th>Nome do Cliente</th>
                <th>Saldo Atual</th>
                <th>Ação</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="account : ${currentAccounts}">
                <td th:text="${account.id}">1</td>
                <td th:text="${account.nameClient}">Cliente 1</td>
                <td th:text="${account.saldo}">1000.00</td>
                <td>
                    
                    <button type="button" th:onclick="'showDepositInput(' + ${account.id} + ')'">
                        Selecionar
                    </button>
                </td>
            </tr>
        </tbody>
    </table>

    
    <div id="deposit-form" style="display: none;">
        <h3>Fazer Saque da conta ID: <span id="account-id-display"></span></h3>
        <form th:action="@{/dashboard/withdraw-current-account}" method="post">
           
            <input type="hidden" id="accountId" name="accountId" />
            <input type="hidden" name="typeOperation" value="withdraw" />
            <label for="depositAmount">Valor do Saque:</label>
            <input type="number" id="depositAmount" name="balance" step="0.01" required />
            <div>
                <label for="observation">Observação:</label>
                <textarea id="observation" name="observation" rows="4" cols="50" placeholder="Digite uma observação (opcional)"></textarea>
            </div>
            <button type="submit">Sacar</button>
        </form>
    </div>
    <div th:if="${errorMessage}">
        <p style="color: red;" th:text="${errorMessage}"></p>
    </div>
    
    <div th:if="${message}">
        <p style="color: green;" th:text="${message}"></p>
    </div>
    <a href="/dashboard">Voltar</a>
</body>
</html>
